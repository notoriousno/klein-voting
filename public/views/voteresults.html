<html>
<head>
    <meta charset="utf-8">
    <title>Vote Results</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script>
    function voteResults(){
        // make request
        var request = $.ajax({
            url: "/api/candidates",
            method: "GET",
            dataType: "json"
        });
        request.done(function (response){
            var total = 0;
            var $results = $("#div-results");
            response.candidates.forEach(function(item){
                var votes = item.votes;
                var name = item.name;
                total += votes;
                $results.append("<div><span style='padding-right: 12%;'>" + votes.toString() + "</span><span>" + name + "</span></div>");
            });

            var $totals = $("#span-total");
            $totals.append(total);
        });
    };
    </script>
</head>
<body onload="voteResults();">

<h1>Vote Results</h1>

<div>
    <div id="div-results">
    </div>
    <br>
    <span id="span-total"></span>
</div>

</body>
</html>
